# üöÄ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –¥–µ–ø–ª–æ–µ Winamax Scraper

## üìä –ü—Ä–æ–¥–∞–∫—à–Ω —Å–µ—Ä–≤–µ—Ä (DigitalOcean)

### –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- **–°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞–±–∏–Ω–µ—Ç** : `[–°–ö–†–´–¢–û]`
- **IP –∞–¥—Ä–µ—Å**: `[–°–ö–†–´–¢–û]`
- **–ü—Ä–æ–≤–∞–π–¥–µ—Ä**: DigitalOcean Amsterdam
- **–û–°**: Ubuntu 22.04 LTS
- **–¢–∞—Ä–∏—Ñ–Ω—ã–π –ø–ª–∞–Ω**: $5/–º–µ—Å—è—Ü (1GB RAM, 1 vCPU, 25GB SSD)
- **SSH –¥–æ—Å—Ç—É–ø**: `[–°–ö–†–´–¢–û]`
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `[–°–ö–†–´–¢–û]`

### –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ü–û
- **Node.js**: 18.20.8
- **npm**: 10.8.2
- **PM2**: 6.0.8 (–∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
- **Git**: –¥–ª—è –¥–µ–ø–ª–æ—è –∫–æ–¥–∞
- **Chrome/Chromium**: –¥–ª—è Puppeteer

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```
/root/winamax-scraper/
‚îú‚îÄ‚îÄ src/
‚îú‚îÄ‚îÄ public/
‚îú‚îÄ‚îÄ .env (–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ server.js (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–µ—Ä–≤–µ—Ä —Å —Å–∫—Ä–∞–ø–µ—Ä–æ–º)
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

### PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã
```bash
# –°—Ç–∞—Ç—É—Å
pm2 status

# –õ–æ–≥–∏
pm2 logs winamax-scraper

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 restart winamax-scraper

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
pm2 stop winamax-scraper
```

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Hostland)

### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- **–•–æ—Å—Ç**: `mysql80.hostland.ru`
- **–ü–æ—Ä—Ç**: `3306`
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: `host1708875_leaderboard`
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**: `host1708875_redparty`
- **–ü–∞—Ä–æ–ª—å**: `[–°–ö–†–´–¢–û]`

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- **tournament_snapshots** - –æ—Å–Ω–æ–≤–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–æ–≤
- **scraping_logs** - –ª–æ–≥–∏ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∞–ø–µ—Ä–∞
- **scraping_metadata** - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Å–∫—Ä–∞–ø–∏–Ω–≥–∞

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ (.env)

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```env
MYSQL_HOST=mysql80.hostland.ru
MYSQL_USERNAME=host1708875_redparty
MYSQL_PASSWORD=[–°–ö–†–´–¢–û]
MYSQL_DATABASE=host1708875_leaderboard
MYSQL_PORT=3306
```

### –°–∫—Ä–∞–ø–∏–Ω–≥
```env
# –ê–∫—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã
ACTIVE_LIMITS=0.25,0.5,1-1.5,2-3,4-7,8-15,16-25,50,100,250,500

# –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –æ—á–∫–∏ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
MIN_POINTS_FILTER=0

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
CHECK_DUPLICATES=true

# –ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–±–æ—Ä–∞ (–º–∏–Ω—É—Ç—ã)
SCRAPING_INTERVAL_MINUTES=10
```

### –°–µ—Ä–≤–µ—Ä
```env
# –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
PORT=3000

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å (–ú–∏–ª–∞–Ω)
TIMEZONE=Europe/Rome

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=info
```

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –¥–µ–ø–ª–æ—è

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ
node server-no-scraper.js  # –±–µ–∑ —Å–∫—Ä–∞–ø–µ—Ä–∞
node server.js             # —Å —Å–∫—Ä–∞–ø–µ—Ä–æ–º
```

### 2. –ö–æ–º–º–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π
```bash
git add .
git commit -m "–û–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
git push origin main
```

### 3. –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä
```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh root@[–°–ö–†–´–¢–û]

# –ü–µ—Ä–µ—Ö–æ–¥ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞
cd /root/winamax-scraper

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞
git pull origin main

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
npm install

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ PM2
pm2 restart winamax-scraper

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
pm2 status
pm2 logs winamax-scraper
```

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ URL

### –ü—Ä–æ–¥–∞–∫—à–Ω (DigitalOcean)
- **–ì–ª–∞–≤–Ω–∞—è**: `[–°–ö–†–´–¢–û]`
- **API —Å—Ç–∞—Ç—É—Å–∞**: `[–°–ö–†–´–¢–û]`
- **API —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**: `[–°–ö–†–´–¢–û]`
- **API –∏—Å—Ç–æ—Ä–∏–∏**: `[–°–ö–†–´–¢–û]`

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- **–ì–ª–∞–≤–Ω–∞—è**: http://localhost:3001 (–∏–ª–∏ PORT –∏–∑ .env)
- **API**: http://localhost:3001/api/*

## üìã –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Å–∫—Ä–∞–ø–∏–Ω–≥–∞**: –∫–∞–∂–¥—ã–µ 10 –º–∏–Ω—É—Ç
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã**: 11 –ª–∏–º–∏—Ç–æ–≤ (0.25‚Ç¨ - 500‚Ç¨)
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤**: –≤–∫–ª—é—á–µ–Ω–∞
- **–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫**: —á–µ—Ä–µ–∑ PM2

### –õ–æ–≥–∏
```bash
# PM2 –ª–æ–≥–∏
pm2 logs winamax-scraper

# –°–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏
journalctl -u pm2-root

# –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
tail -f /root/.pm2/logs/winamax-scraper-out.log
tail -f /root/.pm2/logs/winamax-scraper-error.log
```

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º—ã —Å Puppeteer
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Chrome
google-chrome --version
chromium-browser --version

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
cd /root/winamax-scraper
npm install puppeteer
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ë–î
```bash
# –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
node -e "
const mysql = require('mysql2/promise');
mysql.createConnection({
  host: 'mysql80.hostland.ru',
  user: 'host1708875_redparty',
  password: '[–°–ö–†–´–¢–û]',
  database: 'host1708875_leaderboard'
}).then(() => console.log('‚úÖ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞')).catch(console.error);
"
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –≤—Å–µ–≥–æ
```bash
# –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
pm2 delete winamax-scraper
pm2 start server.js --name winamax-scraper
pm2 save
pm2 startup
```

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –¥–æ—Å—Ç—É–ø—ã

### DigitalOcean
- **Email**: [–≤–∞—à email]
- **–ü–∞—Ä–æ–ª—å**: [–≤–∞—à –ø–∞—Ä–æ–ª—å]
- **2FA**: –≤–∫–ª—é—á–µ–Ω

### Hostland
- **–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è**: https://cp.hostland.ru
- **Login**: [–≤–∞—à –ª–æ–≥–∏–Ω]
- **–ü–∞—Ä–æ–ª—å**: [–≤–∞—à –ø–∞—Ä–æ–ª—å]

### GitHub
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: [—Å—Å—ã–ª–∫–∞ –Ω–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π]
- **–í–µ—Ç–∫–∞**: main

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: 24 –∏—é–Ω—è 2025
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞**: 1.0
**–°—Ç–∞—Ç—É—Å**: üü¢ –†–∞–±–æ—Ç–∞–µ—Ç 